<template>
  <div class="section">
    <h2>Foto</h2>
    <p>Damit wir Dir Deine persönliche Memberkarte erstellen können, brauchen wir auch ein Foto von Dir.</p>
    <p>Wenn Du grad keines hast ist das kein Problem, wir machen bei Deinem ersten Besuch in der GG eins von Dir.</p>
    <form class="form">
      <div v-if="onboardingData.image != null" class="form-item">
        <span class="label">{{ $t('Image-Preview') }}</span>
        <img class="profilePic" v-if="onboardingData.image" :src="onboardingData.imageUrl" />
      </div>
      <div class="form-item">
        <span class="label">{{ $t('Upload-Image') }}</span>
        <input
            type="file"
            accept="image/*"
            @change="onChange"
        />
      </div>
    </form>
  </div>
</template>

<script>
export default {
  middleware: 'authenticated',
  props: {
    onboardingData: {
      type: Object,
      required: true
    }
  },
  data () {
    return {
      loading: false
    }
  },
  computed: {
  },
  methods: {
    onChange (e) {
      const file = e.target.files[0]
      this.onboardingData.image = file
      console.log(this.onboardingData.image)
      this.onboardingData.imageUrl = URL.createObjectURL(file)
      console.log(this.onboardingData.imageUrl)
      const reader = new FileReader()
      reader.onloadend = () => {
        this.onboardingData.image64 = reader.result
        console.log(this.onboardingData.image64)
      }
      this.onboardingData.image64 = reader.readAsDataURL(file)
    }
  }
}
</script>

<style lang="scss" scoped>
@import '/assets/scss/styles.scss';
.form {
  margin-left: -6em;
}
.red {
  color: $color-red;
}
.form-item {
  min-width: 27em;
}
</style>
